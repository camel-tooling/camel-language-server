version: 2.1

jobs: # basic units of work in a run
  build:
    docker: # use the Docker executor
      # CircleCI Node images available at: https://circleci.com/developer/images/image/cimg/node
      - image: cimg/node:18.11.0
    steps: # steps that comprise the `build` job
      - run:
          name: "Print an env var stored in the Project"
          command: |
            gpg --auto-key-locate keyserver --locate-keys apupier@redhat.com
            echo ${GPG_KEYNAME} > test.txt
            gpg --output test.txt.gpg --recipient apupier@redhat.com test.txt
      - store_artifacts:
          path: test.txt

workflows: # a single workflow with a single job called build
  build:
    jobs:
      - build:
          context: Testing-Env-Vars
